(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{9928:function(e,t,r){"use strict";r.d(t,{f:function(){return o},r:function(){return a}});var n=r(7294),o=new(r(88).x),a=(0,n.createContext)(o)},9830:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var n=r(5893),o=r(2508),a=r.n(o),s=r(7294);var l=r(6447),i=r(2212),m=r(1217),c=r(2666),u=r(9365);r(713),r(2132);var h=r(3162),f=r(9928);var _=function(){var e=(0,l.Ky)(),t=(e.invalidate,e.gl),r=(e.camera,e.set,(0,s.useContext)(f.r));return(0,s.useEffect)((function(){var e=null===r||void 0===r?void 0:r.subscribe((function(r){if(alert(1),"png"===r){console.log("gl.domElement.offsetWidth",t.domElement.offsetWidth),console.log("gl.domElement.offsetHeight",t.domElement.offsetHeight);var n={width:t.domElement.offsetWidth,height:t.domElement.offsetHeight},o=t.getPixelRatio(),a={width:1*n.width/o,height:1*n.height/o};t.setSize(a.width,a.height,!1),setTimeout((function(){var e=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return new Blob([n],{type:r})}(t.domElement.toDataURL());console.log("blob",e),(0,h.saveAs)(e,"previewed.png"),t.setSize(t.domElement.offsetWidth,t.domElement.offsetHeight,!1)}),500)}return function(){e.unsubscribe()}}))}),[]),null};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(i){l=!0,o=i}finally{try{s||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(0,l.l7)({OrbitControls:u.z});var d=function(){var e=s.useRef(),t=(0,l.Ky)(),r=t.camera,o=t.gl;return(0,l.xQ)((function(){return e.current&&e.current.update()})),(0,n.jsx)("orbitControls",{ref:e,args:[r,o.domElement],enableZoom:!1})},y=function(e){var t=e.currentDevice,r=p(s.useState({}),2),o=r[0],a=r[1],u=p(s.useState(null),2),h=(u[0],u[1]),f=(0,l.Ky)().gl,_=s.useRef(),g=(0,l.U2)(c.x,"/mockupyour.app/3DModels/EnvMaps/2photo_studio_01_1k.hdr"),d=(0,l.U2)(m.E,"/mockupyour.app/3DModels/Phones/iphone_12/scene.gltf"),y=d.nodes,E=d.materials;s.useMemo((function(){return(new i.Box3).setFromObject(y.OSG_Scene).getCenter(new i.Vector3)}),[y.OSG_Scene]);return s.useEffect((function(){var e=new i.PMREMGenerator(f);e.compileEquirectangularShader();var t=e.fromEquirectangular(g),r={},n=new i.Color("rgb(0, 0, 0)").convertSRGBToLinear();Object.keys(E).forEach((function(e){r[e]=E[e].clone(),r[e].envMap=t.texture,r[e].envMapIntensity=1})),r.frame_metal.color=n,r.frame_metal.metalness=1,r.frame_metal.roughness=.3,r.REAR_CAM_MAIN.color=n,r.display_wallpaper.color=n,r.display_wallpaper.envMapIntensity=.1,r.display_wallpaper.roughness=.2,r.IPHONE_DISPLAY_FRAME.color=n,r.IPHONE_DISPLAY_FRAME.metalness=1,r.IPHONE_DISPLAY_FRAME.roughness=.2,r.IPHONE_BACK.metalness=1,r.IPHONE_BACK.roughness=.3,a(r)}),[E]),s.useEffect((function(){if(t.screenshot&&0!==Object.keys(o).length){if(t.screenshot.includes("data:image")){var e=(new i.TextureLoader).load(t.screenshot);h(null)}else if(t.screenshot.includes("data:video")){var r=document.createElement("VIDEO");r.setAttribute("src",t.screenshot),r.setAttribute("autoplay","true");e=new i.VideoTexture(r);h(r)}e.encoding=i.sRGBEncoding,e.generateMipmaps=!1,e.minFilter=i.LinearFilter,o.display_wallpaper.map=e,o.display_wallpaper.emissiveMap=e}}),[t.screenshot,o]),s.useEffect((function(){t.color&&Object.keys(o).forEach((function(e){"frame_metal"!==e&&"IPHONE_BACK"!==e&&"REAR_CAM_MAIN"!==e||o[e].emissive.setStyle(t.color).convertSRGBToLinear()}))}),[t.color,o]),(0,n.jsx)("group",{ref:_,scale:[4,4,4],position:[0,0,0],children:(0,n.jsx)("group",{rotation:[-Math.PI/2,0,-Math.PI/2],children:(0,n.jsx)("group",{rotation:[Math.PI/2,0,0],children:(0,n.jsxs)("group",{position:[0,.007,-.005],children:[(0,n.jsx)("mesh",{material:o.IPHONE_DISPLAY_FRAME,geometry:y.mesh_0.geometry}),(0,n.jsx)("mesh",{material:o.TRANSPARENT_GLASS,geometry:y.mesh_1.geometry}),(0,n.jsx)("mesh",{material:o.frame_metal,geometry:y.mesh_2.geometry}),(0,n.jsx)("mesh",{material:o.FRAME_MATTE,geometry:y.mesh_3.geometry}),(0,n.jsx)("mesh",{material:o.BLACK_MATTE,geometry:y.mesh_4.geometry}),(0,n.jsx)("mesh",{material:o.CHROME,geometry:y.mesh_5.geometry}),(0,n.jsx)("mesh",{material:o.display_wallpaper,geometry:y.mesh_6.geometry}),(0,n.jsx)("mesh",{material:o.IPHONE_BACK,geometry:y.mesh_7.geometry}),(0,n.jsx)("mesh",{material:o.REAR_CAM_MAIN,geometry:y.mesh_8.geometry}),(0,n.jsx)("mesh",{material:o.IPHONE_LOGO,geometry:y.mesh_9.geometry}),(0,n.jsx)("mesh",{material:o.REAR_CAM_03,geometry:y.mesh_10.geometry}),(0,n.jsx)("mesh",{material:o.BLACK_GLOSSY,geometry:y.mesh_11.geometry}),(0,n.jsx)("mesh",{material:o.FRONT_CAM_TEXTURE,geometry:y.mesh_12.geometry}),(0,n.jsx)("mesh",{material:o.FRONT_SPEAKER,geometry:y.mesh_13.geometry}),(0,n.jsx)("mesh",{material:o.frame_metal_matte,geometry:y.mesh_14.geometry}),(0,n.jsx)("mesh",{material:o.camera_white_glass,geometry:y.mesh_15.geometry}),(0,n.jsx)("mesh",{material:o.camera_black_glass,geometry:y.mesh_16.geometry}),(0,n.jsx)("mesh",{material:o.camera_lens_texture,geometry:y.mesh_17.geometry}),(0,n.jsx)("mesh",{material:o.camera_lens_outside,geometry:y.mesh_18.geometry})]})})})})},E=function(){var e=p(s.useState("#000000"),2),t=e[0],r=(e[1],p(s.useState(null),2)),o=r[0];r[1];return(0,n.jsx)("div",{className:a().container,children:(0,n.jsx)("div",{className:a().canvas,children:(0,n.jsxs)(l.Xz,{concurrent:!0,dpr:window.devicePixelRatio,gl:{preserveDrawingBuffer:!0,alpha:!0,antialias:!0},onCreated:function(e){e.gl.toneMapping=i.NoToneMapping},colorManagement:!0,camera:{position:[0,0,1],fov:40},children:[(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(y,{currentDevice:{color:t,screenshot:o}})}),(0,n.jsx)(d,{}),(0,n.jsx)(_,{})]})})})}},2508:function(e){e.exports={container:"example_container__rd_sJ",canvas:"example_canvas___f5VL",settings:"example_settings__cqJ8P",colors:"example_colors__6sFMM",dropzone:"example_dropzone___XFt9"}}}]);